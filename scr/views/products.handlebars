<div class="container text-center">
    <h1>Lista de productos</h1>
</div>

<div class="container mt-2 mb-3">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="user-info-container">
                <h4 class="mb-3">Información del usuario</h4>
                <p class="mb-1">Email: {{session.email}}</p>
                <p>Tipo de usuario: {{session.rol}}</p>

                <a href="/cart/{{session.cart}}" id="cartButton" data-cart-id="{{session.cart}}" class="btn btn-success mr-2">Carrito de Compras</a>
                <button id="logout" onclick="logout()" class="btn btn-primary">Cerrar Sesión</button>
            </div>
        </div>        
    </div>
</div>

<div class="container-fluid">
    <div class="row row-cols-2">
            <!-- Agrega tus Cards aquí -->
            {{#each products}}
            <div class="col">
                <div class="card mb-3" id={{_id}}>
                    <img src={{thumbnail}} class="card-img-top" alt="..." width="100" height="200">
                    <div class="card-body">
                        <h5 class="card-title">{{title}}</h5>
                        <p class="card-text">{{description}}</p>
                        <p class="card-text">$ {{price}}</p>
                        <button class="btn btn-primary" onclick="addToCart('{{_id}}')">Agregar al carrito</button>
                    </div>
                </div>
            </div>
            {{/each}}
            <!-- Repite este bloque para más productos -->
    </div>
</div>

<!-- Elemento para mostrar mensajes al usuario -->
<div id="messageContainer" class="fixed-bottom mb-3 mx-auto w-50 text-center"></div>

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    {{#if prevPage}}
        <li class="page-item">
            <a class="page-link" href="?page={{prevPage}}" tabindex="-1" aria-disabled="true">Anterior</a>
        </li>
    {{else}}
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Anterior</a>
        </li>
    {{/if}}
    
    {{#each pages}}
        <li class="page-item {{#eq this ../page}}active{{/eq}}">
            <a class="page-link" href="?page={{this}}">{{this}}</a>
        </li>
    {{/each}}
    
    {{#if nextPage}}
        <li class="page-item">
            <a class="page-link" href="?page={{nextPage}}">Siguiente</a>
        </li>
    {{else}}
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Siguiente</a>
        </li>
    {{/if}}
  </ul>
</nav>


<!-- Enlace CDN de Bootstrap JS (requerido para ciertos componentes de Bootstrap) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/products.js"></script>
